---
title: markdown-modeでファイルを更新するとHTMLファイルも自動更新されるようにする
tags:
  - Emacs
  - Markdown
  - emacs-lisp
private: false
updated_at: '2026-01-27T15:46:24+09:00'
id: 6328d2ec36c003be3713
organization_url_name: null
slide: false
ignorePublish: false
---
## はじめに

https://jblevins.org/projects/markdown-mode/

Emacsのmarkdown-modeでは, `C-c C-c e` (`markdown-export`) で, HTMLファイルを出力できる.
しかし, Markdownファイルを更新するたびに, 手動でHTMLファイルを再出力するのは面倒.

## 設定
そこで以下のように[`:hook`](https://www.gnu.org/software/emacs/manual/html_node/use-package/Hooks.html)を追加すると, Markdownファイル保存時に自動でHTMLファイルも更新されるようにできる.
ただし, `markdown-command` が存在かつ、すでにHTMLファイルが存在する場合にのみ自動出力するようにしている.

```emacs-lisp:~/.emacs.d/init.el
(use-package markdown-mode
  :custom
  (markdown-command
   (seq-find #'executable-find
             '( ; 以下の順にコマンドを探して, 最初に見つかったものを設定する
               "cmark-gfm"
               "pandoc"
               "commonmark"
               )))

  :hook
  (markdown-mode . (lambda ()
                     ;; HTMLが存在すれば, 保存後にexport
                     (when (executable-find markdown-command)
                       (add-hook 'after-save-hook
                                 (lambda ()
                                   (when (file-exists-p (concat (file-name-sans-extension (buffer-file-name)) ".html"))
                                     (markdown-export)
                                     ))
                                 nil t))
                     ))
  )
```

この設定により, 1度HTMLファイルを手動で出力すると, 以降はMarkdownファイル更新時に自動でHTMLファイルも更新されるようになる.

## バージョン情報

```emacs-lisp:*scratch*
markdown-mode-version
"2.8-alpha"

emacs-version
"30.2"
```

## 関連記事
https://qiita.com/skkzsh/items/9bbcb8bcf02e32fe51d8
