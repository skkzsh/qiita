---
title: GnuPGやOpenSSLでディレクトリを暗号化
tags:
  - OpenSSL
  - gpg
  - 暗号化
  - GnuPG
  - 暗号
private: false
updated_at: '2025-12-04T19:07:11+09:00'
id: 6b8c3eea4395a9c87d76
organization_url_name: null
slide: false
ignorePublish: false
---
## はじめに

[__GnuPG__](https://gnupg.org) や __OpenSSL__ の __共通鍵暗号__ 方式で, アルゴリズムは __AES256__ を使う.

なお, `gpg`でアルゴリズムを指定するには, [`--cipher-algo`](https://www.gnupg.org/gph/en/manual/r1434.html)オプションを使うが, 
あらかじめ[設定ファイル](https://www.gnupg.org/documentation/manuals/gnupg/GPG-Configuration.html)に追記しておけば, オプションを省略できる.

```~/.gnupg/gpg.conf
cipher-algo aes256
```

## ディレクトリの暗号化・復号化

### GnuPG

```sh
tar cf - foo | gpg -c -o foo.tar.gpg # 暗号化
gpg -o- foo.tar.gpg | tar xvf - # 復号化
```

さらに, GnuPG付属の`gpg-zip`スクリプトを用いれば, 簡潔に書ける.

```sh
gpg-zip -o foo.tar.gpg -c foo # 暗号化
gpg-zip -d foo.tar.gpg # 復号化
```

https://www.gnupg.org/documentation/manuals/gnupg/gpg_002dzip.html

### OpenSSL

```sh
tar cf - foo | openssl aes-256-cbc -e -out foo.tar.enc # 暗号化
openssl aes-256-cbc -d -in foo.tar.enc | tar xvf - # 復号化
```


## 参考: 単一ファイルの暗号化・復号化

比較のため, それぞれ以下に載せる.

### GnuPG

```sh
gpg -c bar.txt # 暗号化
gpg bar.txt.gpg # 復号化
```

### OpenSSL

```sh
openssl aes-256-cbc -e -in bar.txt -out bar.txt.enc # 暗号化
openssl aes-256-cbc -d -in bar.txt.enc -out bar.txt # 復号化
```
