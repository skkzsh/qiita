---
title: Git Credential Managerを無理やりMSYSでも使う
tags:
  - Windows
  - Git
  - Cygwin
  - MinGW
  - msys2
private: false
updated_at: '2025-12-04T19:18:08+09:00'
id: b9cf40b45877b72c5301
organization_url_name: null
slide: false
ignorePublish: false
---
## はじめに

https://git-scm.com/docs/gitcredentials

Git Credentialを使用すると, Gitでhttps接続する時のパスワード入力を省略できる.
ただし, 認証情報の保管方法には, 複数のオプションがある.
そのうち, [Git Credential Manager (GCM)](https://github.com/Microsoft/Git-Credential-Manager-for-Windows)では, [GitHub](https://github.com)や[Bitbucket](https://bitbucket.org),
[Azure DevOps](https://azure.microsoft.com/ja-jp/services/devops)の2段階認証に対応している.

GCMは[Git for Windows](https://git-for-windows.github.io/)ではデフォルトで使えるが, [MSYS2](https://www.msys2.org)などのGitでは使えない.
使うには, 単純に以下の方法がある.

1. MSYSから直接Git for Windowsを使う.
2. Git for WindowsのGCMのファイル (exeとdll) をMSYSへコピー.


## まず初期設定を確認してみる

### Git for Windows
Git for Windowsでは, 以下のとおりデフォルトでGCMを使う設定になっている.

```console:コマンドプロンプト
> git config --show-origin credential.helper
file:C:/Program Files/Git/mingw64/etc/gitconfig   manager
```

### MSYS
一方, MSYS2では以下のとおり, `credential-manager` (GCM) は使用できない.

```console:MSYS2
$ git credential-manager version
git: 'credential-manager' is not a git command. See 'git --help'.
```

## 使うための方法

### 方法①

MSYSでGCMを使うには, 以下のように直接Git for Windowsを指定して使う.

```console:MSYS
$ /c/Program\ Files/Git/bin/git credential-manager version
Git Credential Manager for Windows version 1.18.4
```

必要に応じて`alias`を設定.

```bash:.bashrc
alias wgit=/c/Program\ Files/Git/bin/git
```


### 方法②

Git for WindowsにあるGCMのファイルを以下のようにMSYSへコピーする.

```console:MSYS
$ cd /c/Program\ Files/Git/mingw64/libexec/git-core

$ ls -1 git-credential-manager *Authentication* Microsoft.*.dll
AzureDevOps.Authentication.dll
Bitbucket.Authentication.dll
git-credential-manager
GitHub.Authentication.exe
Microsoft.Alm.Authentication.dll
Microsoft.IdentityModel.Clients.ActiveDirectory.dll

$ cp git-credential-manager *Authentication* Microsoft.*.dll /usr/lib/git-core/
```

ここで, MSYSで再度確認すると, 以下のとおり`credential-manager`が使用できるようになっている.

```console:MSYS2
$ git credential-manager version
Git Credential Manager for Windows version 1.18.4
```

実際にMSYSでGCMを使用する設定にするには, 以下のとおり.

```console:MSYS
$ git config --global credential.helper manager
```

## 参考

https://git-scm.com/book/ja/v2/Git-%E3%81%AE%E3%81%95%E3%81%BE%E3%81%96%E3%81%BE%E3%81%AA%E3%83%84%E3%83%BC%E3%83%AB-%E8%AA%8D%E8%A8%BC%E6%83%85%E5%A0%B1%E3%81%AE%E4%BF%9D%E5%AD%98

http://stackoverflow.com/questions/18683935/store-https-passwords-with-cygwins-git

## 確認環境
- Windows 10
- Git for Windows 2.21.0
- MSYS2 (git 2.21.0)
