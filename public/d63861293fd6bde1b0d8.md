---
title: 'コマンドが存在するかしないかを判定して, 条件分岐する構文のまとめ'
tags:
  - Emacs
  - Vim
  - ShellScript
  - コマンドプロンプト
  - PowerShell
private: false
updated_at: '2025-12-04T19:04:37+09:00'
id: d63861293fd6bde1b0d8
organization_url_name: null
slide: false
ignorePublish: false
---
## Vim

[`executable()`関数](https://vim-jp.org/vimdoc-ja/builtin.html#executable())を使う.

```vim:~/.vimrc
" コマンドが存在すれば
if executable('git')
    NeoBundle 'mattn/gist-vim'
endif
```


## Emacs

[`executable-find`関数](https://www.gnu.org/software/emacs/manual/html_node/elisp/Locating-Files.html#index-executable_002dfind)を使う.

```emacs-lisp:~/.emacs.d/init.el
(when (executable-find "terraform") ; コマンドが存在すれば
  (el-get-bundle terraform-mode)
  )
```


## sh

`hash`や`type`, `which`, `command -v`などを使う.

### ワンライナー

```sh:
type htop > /dev/null 2>&1 && echo Success!
# コマンドが存在すれば
```

```sh:
type htop > /dev/null 2>&1 || echo Error!
# コマンドが存在しなければ
```

### 複数行

```sh:
type htop > /dev/null 2>&1
if [ $? -eq 0 ] ; then # コマンドが存在すれば
    echo Success!
    alias top=htop
else                   # コマンドが存在しなければ
    echo Error! >&2
    exit 1
fi
```

簡潔に書くと:

```sh:
if type htop > /dev/null 2>&1; then # コマンドが存在すれば
    echo Success!
    alias top=htop
else                                 # コマンドが存在しなければ
    echo Error! >&2
    exit 1
fi
```


## PowerShell

### ワンライナー
`&&`や`||`に対応するものはたぶんない ?

### 複数行

`Get-Command` (`gcm`) コマンドレットを使う.

https://learn.microsoft.com/ja-jp/powershell/module/microsoft.powershell.core/get-command

```powershell
gcm perldoc -ea SilentlyContinue | Out-Null
if ($? -eq $true) { # コマンドが存在すれば
    Write-Output 'Success!'
    perldoc perldoc
} else {            # コマンドが存在しなければ
    Write-Error 'Error!'
    exit 1
}
```

簡潔に書くと:

```powershell
if (gcm perldoc -ea SilentlyContinue) { # コマンドが存在すれば
    Write-Output 'Success!'
    perldoc perldoc
} else {                                # コマンドが存在しなければ
    Write-Error 'Error!'
    exit 1
}
```


## コマンドプロンプト

`where`コマンドを使う.

https://learn.microsoft.com/ja-jp/windows-server/administration/windows-commands/where

### ワンライナー

```powershell:
where /q perldoc && echo Success!
rem コマンドが存在すれば
```

```powershell:
where /q perldoc || echo Error!
rem コマンドが存在しなければ
```

### 複数行

```powershell:
where /q perldoc
if %errorlevel% == 0 ( :: コマンドが存在すれば
    echo Success!
    perldoc perldoc
) else (               :: コマンドが存在しなければ
    echo Error! >&2
    exit /b 1
)
```
